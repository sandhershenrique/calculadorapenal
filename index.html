<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>CALCULADORA PENAL</title>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>

body{
    font-family: Arial, sans-serif;
    background:#0f0f0f;
    color:#fff;
    padding:20px;
}

h1{
    text-align:center;
    color:#ff0000;
}

.logo{
    width:70px;
    display:block;
    margin:auto;
}

.container{
    max-width:900px;
    margin:auto;
    background:#1b1b1b;
    padding:20px;
    border-radius:10px;
}

input, textarea{
    width:100%;
    padding:10px;
    margin-bottom:10px;
    border-radius:6px;
    border:none;
}

.categoria{
    margin-top:20px;
    padding:10px;
    border:1px solid #333;
    border-radius:8px;
}

.categoria h3{
    color:#ff3c3c;
}

.crime{
    padding:5px 0;
    border-bottom:1px solid #333;
}

.total{
    margin-top:20px;
    font-size:18px;
}

button{
    background:#ff0000;
    color:#fff;
    border:none;
    padding:12px;
    width:100%;
    margin-top:15px;
    border-radius:6px;
    cursor:pointer;
}

.reducao{
    background:#111;
    margin-top:20px;
    padding:15px;
    border-radius:8px;
}

/* ===== RELAT√ìRIO OFICIAL ===== */

#resultadoFinal{
    margin-top:30px;
    padding:40px;
    display:none;
    border-radius:6px;
    background:#fff;
    color:#000;
    font-family:"Times New Roman", serif;
    border:3px solid #000;
}

.relatorio-header{
    text-align:center;
    border-bottom:3px double #000;
    margin-bottom:20px;
    padding-bottom:10px;
}

.relatorio-titulo{
    font-size:30px;
    font-weight:bold;
    letter-spacing:2px;
}

.subtitulo{
    font-size:14px;
}

.bloco{
    margin-top:15px;
    padding:12px;
    border:1px solid #000;
}

.linha{
    display:flex;
    justify-content:space-between;
    border-bottom:1px solid #000;
    padding:3px 0;
}

.totalBox{
    font-weight:bold;
    background:#eee;
}

</style>
</head>

<body>

<img src="foto.png" class="logo">
<h1>CALCULADORA PENAL</h1>

<div class="container">

<input id="policial" placeholder="Nome do Policial">
<input id="idpolicial" placeholder="Passaporte do Policial (ID)">
<input id="suspeito" placeholder="Nome do Infrator">
<input id="idsuspeito" placeholder="Passaporte do Infrator (ID)">

<div id="crimesContainer"></div>

<div class="reducao">
<h3>FINALIZA√á√ÉO - REDU√á√ïES DE PENA</h3>

<label>R√©u prim√°rio:
<input type="checkbox" name="reu" value="sim" onclick="unico(this);calcular()"> SIM
<input type="checkbox" name="reu" value="nao" onclick="unico(this);calcular()"> N√ÉO
</label><br>

<label>Bom comportamento:
<input type="checkbox" name="bom" value="sim" onclick="unico(this);calcular()"> SIM
<input type="checkbox" name="bom" value="nao" onclick="unico(this);calcular()"> N√ÉO
</label><br>

<label>Ficha limpa:
<input type="checkbox" name="ficha" value="sim" onclick="unico(this);calcular()"> SIM
<input type="checkbox" name="ficha" value="nao" onclick="unico(this);calcular()"> N√ÉO
</label>

</div>

<div class="total">
Meses Totais: <span id="meses">0</span><br>
Multa Total: $<span id="multa">0</span><br>
Fian√ßa Total: $<span id="fianca">0</span><br>
Total Geral (Multa + Fian√ßa): $<span id="total">0</span>
</div>

<textarea id="obs" placeholder="Observa√ß√µes do policial..."></textarea>

<button id="btnAplicar" onclick="gerarRelatorio()">APLICAR PENA</button>

<div id="resultadoFinal">

<div class="relatorio-header">
<img src="foto.png" class="logo">
<div class="relatorio-titulo">RELAT√ìRIO PENAL OFICIAL</div>
<div class="subtitulo">Departamento de Pol√≠cia - Sistema Judicial</div>
</div>

<div id="dados" class="bloco"></div>

<div class="bloco">
<h3>Infra√ß√µes Registradas</h3>
<div id="listaCrimes"></div>
</div>

<div class="bloco">
<h3>Observa√ß√µes do Policial</h3>
<div id="observacaoFinal"></div>
</div>

</div>

</div>

<script>

/* ===========================
   WEBHOOK DISCORD
=========================== */

const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1471684006901842001/vQFiUpag8t2xCAR7pzx0Al_gepXby2ZrY3p1jeVDSAhUynfXwxOE36l7guhsYwO1g0yc";

/* ===== NOVAS FUN√á√ïES ===== */

function gerarID(){
return "REL-"+Date.now();
}

function agora(){
return new Date().toLocaleString("pt-BR");
}

/* =========================== */
/* RESTANTE ORIGINAL */
/* =========================== */

const categorias = [
{
titulo:"ITENS ILEGAIS ‚Äì ART. 2¬∫",
dados:[
{num:"2.2", nome:"Drogas uso pr√≥prio", meses:0, multa:6250, fianca:0},
{num:"2.3", nome:"Dinheiro sujo < 100k", meses:0, multa:6250, fianca:0},
{num:"2.4", nome:"Algemas/capuz/keycard", meses:6, multa:6250, fianca:6250},
{num:"2.5", nome:"Masterpick/lockpick", meses:6, multa:6250, fianca:6250},
{num:"2.6", nome:"Colete bal√≠stico", meses:13, multa:12500, fianca:12500},
{num:"2.7", nome:"Ve√≠culo clonado", meses:13, multa:12500, fianca:12500},
{num:"2.8", nome:"Dinheiro sujo ‚â•100k", meses:13, multa:12500, fianca:12500},
{num:"2.9", nome:"Itens ilegais", meses:19, multa:18750, fianca:18750},
{num:"2.10", nome:"Tr√°fico de drogas", meses:19, multa:18750, fianca:18750},
{num:"2.11", nome:"Muni√ß√£o ilegal", meses:19, multa:18750, fianca:18750}
]
},
{
titulo:"CRIMES DE TR√ÇNSITO ‚Äì ART. 1¬∫",
dados:[
{num:"1.1", nome:"Alta velocidade", meses:0, multa:3125, fianca:0},
{num:"1.2", nome:"Estacionar proibido", meses:0, multa:12500, fianca:0},
{num:"1.3", nome:"Abandono ve√≠culo", meses:0, multa:12500, fianca:0},
{num:"1.4", nome:"Fila dupla", meses:0, multa:12500, fianca:0},
{num:"1.5", nome:"Som alto", meses:0, multa:12500, fianca:0},
{num:"1.6", nome:"Bloquear via", meses:0, multa:12500, fianca:0},
{num:"1.7", nome:"Manobras perigosas", meses:6, multa:12500, fianca:12500},
{num:"1.8", nome:"Dire√ß√£o perigosa", meses:6, multa:12500, fianca:12500},
{num:"1.9", nome:"Dirigir sob efeito", meses:6, multa:12500, fianca:12500}
]
},
{
titulo:"CRIMES INAFIAN√á√ÅVEIS ‚Äì ART. 4¬∫",
dados:[
{num:"4.1", nome:"Sequestro", meses:50, multa:50000, fianca:50000},
{num:"4.2", nome:"Porte arma alto calibre", meses:50, multa:50000, fianca:50000},
{num:"4.3", nome:"Tr√°fico de armas", meses:50, multa:50000, fianca:50000},
{num:"4.4", nome:"Tr√°fico de muni√ß√µes", meses:50, multa:50000, fianca:50000},
{num:"4.5", nome:"Desacato servidor p√∫blico", meses:50, multa:50000, fianca:50000},
{num:"4.6", nome:"Abuso de poder", meses:63, multa:62500, fianca:62500},
{num:"4.7", nome:"Assalto banco/joalheria", meses:75, multa:75000, fianca:75000},
{num:"4.8", nome:"Corrup√ß√£o passiva", meses:75, multa:75000, fianca:75000},
{num:"4.9", nome:"Latroc√≠nio", meses:75, multa:75000, fianca:75000},
{num:"4.10", nome:"Homic√≠dio doloso", meses:75, multa:75000, fianca:75000}
]
}
];

const div=document.getElementById("crimesContainer");

categorias.forEach((cat,ci)=>{
let html=`<div class="categoria"><h3>${cat.titulo}</h3>`;
cat.dados.forEach((c,i)=>{
html+=`<div class="crime">
<input type="checkbox" onchange="calcular()" data-cat="${ci}" data-i="${i}">
${c.num} - ${c.nome} (${c.meses} meses)
</div>`;
});
html+="</div>";
div.innerHTML+=html;
});

function unico(el){
document.getElementsByName(el.name).forEach(x=>{if(x!=el)x.checked=false});
}

const mesesEl=meses;
const multaEl=multa;
const fiancaEl=fianca;
const totalEl=total;

function calcular(){

let meses=0,multa=0,fianca=0;

document.querySelectorAll('#crimesContainer input:checked').forEach(el=>{
let c=categorias[el.dataset.cat].dados[el.dataset.i];
meses+=c.meses;
multa+=c.multa;
fianca+=c.fianca;
});

let red=0;

if(document.querySelector('[name=reu][value=sim]')?.checked) red+=0.05;
if(document.querySelector('[name=bom][value=sim]')?.checked) red+=0.10;
if(document.querySelector('[name=ficha][value=sim]')?.checked) red+=0.05;

meses=Math.round(meses-(meses*red));

mesesEl.innerText=meses;
multaEl.innerText=multa;
fiancaEl.innerText=fianca;
totalEl.innerText=multa+fianca;

}

/* ===== RELAT√ìRIO + DISCORD ===== */

function gerarRelatorio(){

const botao = document.getElementById("btnAplicar");
if(botao.disabled) return;
botao.disabled = true;
botao.innerText = "PROCESSANDO...";

let idRelatorio = gerarID();

let lista="";
document.querySelectorAll('#crimesContainer input:checked').forEach(el=>{
let c=categorias[el.dataset.cat].dados[el.dataset.i];
lista+=`${c.num} - ${c.nome}\n`;
});

listaCrimes.innerHTML=lista || "Nenhuma infra√ß√£o registrada.";

dados.innerHTML=`
<div class="linha"><b>ID:</b> ${idRelatorio}</div>
<div class="linha"><b>Data/Hora:</b> ${agora()}</div>
<div class="linha"><b>Policial:</b> ${policial.value} (${idpolicial.value})</div>
<div class="linha"><b>Infrator:</b> ${suspeito.value} (${idsuspeito.value})</div>
<div class="linha totalBox"><b>Meses Totais:</b> ${mesesEl.innerText}</div>
<div class="linha totalBox"><b>Total Financeiro:</b> $${totalEl.innerText}</div>
`;

observacaoFinal.innerHTML = obs.value ? obs.value : "Sem observa√ß√µes.";

resultadoFinal.style.display="block";

enviarDiscord(lista,idRelatorio);

setTimeout(baixarImagem,400);

}

function enviarDiscord(lista,idRelatorio){

if(DISCORD_WEBHOOK==="COLE_SEU_WEBHOOK_AQUI") return;

html2canvas(document.getElementById("resultadoFinal"),{scale:2}).then(canvas=>{

canvas.toBlob(function(blob){

const formData = new FormData();

formData.append("file", blob, "relatorio.png");

formData.append("payload_json", JSON.stringify({
username:"Sistema Penal",
embeds:[{
title:"üö® RELAT√ìRIO PENAL",
color:16711680,
fields:[
{name:"ID",value:idRelatorio,inline:true},
{name:"Data/Hora",value:agora(),inline:true},
{name:"Policial",value:`${policial.value} (${idpolicial.value})`},
{name:"Infrator",value:`${suspeito.value} (${idsuspeito.value})`},
{name:"Infra√ß√µes",value:lista||"Nenhuma"},
{name:"Meses",value:mesesEl.innerText,inline:true},
{name:"Total",value:"$"+totalEl.innerText,inline:true}
]
}]
}));

fetch(DISCORD_WEBHOOK,{
method:"POST",
body:formData
});

});

});

}

function baixarImagem(){

html2canvas(document.getElementById("resultadoFinal"),{scale:2}).then(canvas=>{

let nome=suspeito.value||"INDIVIDUO";
let id=idsuspeito.value||"ID";

let link=document.createElement("a");
link.download=nome+"_"+id+"_relatorio.png";
link.href=canvas.toDataURL("image/png");

document.body.appendChild(link);
link.click();
document.body.removeChild(link);

});

}

</script>

</body>
</html>
